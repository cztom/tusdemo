/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/tus-js-client@3.0.1/lib/browser/sources/StreamSource.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
function len(e){return void 0===e?0:void 0!==e.size?e.size:e.length}function concat(e,t){if(e.concat)return e.concat(t);if(e instanceof Blob)return new Blob([e,t],{type:e.type});if(e.set){const r=new e.constructor(e.length+t.length);return r.set(e),r.set(t,e.length),r}throw new Error("Unknown data type")}export default class StreamSource{constructor(e){this._buffer=void 0,this._bufferOffset=0,this._reader=e,this._done=!1}slice(e,t){return e<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(e,t)}_readUntilEnoughDataOrDone(e,t){const r=t<=this._bufferOffset+len(this._buffer);if(this._done||r){const r=this._getDataFromBuffer(e,t),n=null==r&&this._done;return Promise.resolve({value:r,done:n})}return this._reader.read().then((({value:r,done:n})=>(n?this._done=!0:void 0===this._buffer?this._buffer=r:this._buffer=concat(this._buffer,r),this._readUntilEnoughDataOrDone(e,t))))}_getDataFromBuffer(e,t){e>this._bufferOffset&&(this._buffer=this._buffer.slice(e-this._bufferOffset),this._bufferOffset=e);const r=0===len(this._buffer);return this._done&&r?null:this._buffer.slice(0,t-e)}close(){this._reader.cancel&&this._reader.cancel()}}
//# sourceMappingURL=/sm/065fe8997a3b160296fbcab01b812058dd177643d2af4a13e6ec140ab38d7e17.map